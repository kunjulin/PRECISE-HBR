<!DOCTYPE html>
<html>
<head>
    <title>Patient ID Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .patient-id { background: #007bff; color: white; padding: 10px; border-radius: 5px; display: inline-block; }
        .debug { background: #f8f9fa; padding: 15px; border: 1px solid #dee2e6; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Patient ID Display Test</h1>
    
    <div class="debug">
        <h3>Server-Side Data:</h3>
        <p><strong>Patient ID from template:</strong> 
            <span class="patient-id">{{ patient_id if patient_id else 'NO_PATIENT_ID' }}</span>
        </p>
    </div>
    
    <div class="debug">
        <h3>JavaScript Test:</h3>
        <p><strong>Patient ID from API:</strong> <span id="api-patient-id">Loading...</span></p>
    </div>
    
    <a href="/main">‚Üê Back to Main Page</a>
    
    <script>
        // Test API call
        fetch('/api/calculate_risk')
            .then(response => response.json())
            .then(data => {
                console.log('API Response:', data);
                const patientId = data.patient_info?.patient_id || 'NOT_FOUND_IN_API';
                document.getElementById('api-patient-id').textContent = patientId;
                document.getElementById('api-patient-id').style.background = '#28a745';
                document.getElementById('api-patient-id').style.color = 'white';
                document.getElementById('api-patient-id').style.padding = '5px';
                document.getElementById('api-patient-id').style.borderRadius = '3px';
            })
            .catch(error => {
                console.error('API Error:', error);
                document.getElementById('api-patient-id').textContent = 'API_ERROR: ' + error.message;
                document.getElementById('api-patient-id').style.background = '#dc3545';
                document.getElementById('api-patient-id').style.color = 'white';
                document.getElementById('api-patient-id').style.padding = '5px';
            });
    </script>
</body>
</html> 