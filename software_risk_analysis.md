# 軟體風險分析文件
## ARC-HBR 出血風險計算器 SMART on FHIR 應用程式

**文件版本**: 1.0  
**文件日期**: 2024年1月  
**符合標準**: ISO 14971:2019, IEC 62304:2006+A1:2015  

---

## 1. 執行摘要

### 1.1 目的
本文件提供 ARC-HBR 出血風險計算器軟體的全面風險分析，識別潛在危害、評估風險等級，並制定相應的風險控制措施。

### 1.2 產品概述
- **產品名稱**: ARC-HBR 出血風險計算器
- **產品類型**: SMART on FHIR 臨床決策支援軟體
- **預期用途**: 協助醫療專業人員評估患者出血風險
- **使用環境**: 醫院資訊系統 (如 Cerner, Epic)
- **使用者**: 醫師、護理師、藥師等醫療專業人員

### 1.3 軟體分類
根據 IEC 62304，本軟體分類為：
- **軟體安全分類**: Class B (非致命傷害)
- **理由**: 軟體故障可能導致不當臨床決策，但不會直接造成死亡

---

## 2. 風險管理流程

### 2.1 風險分析方法
- **定性風險分析**: 使用風險矩陣評估
- **定量風險分析**: 針對關鍵風險使用數值評估
- **風險可接受性標準**: 遵循 ALARP (As Low As Reasonably Practicable) 原則

### 2.2 風險評估矩陣

| 嚴重程度 | 描述 | 分數 |
|----------|------|------|
| 災難性 (Catastrophic) | 死亡 | 5 |
| 重大 (Critical) | 永久傷害 | 4 |
| 中等 (Major) | 暫時傷害或延誤治療 | 3 |
| 輕微 (Minor) | 不適或輕微延誤 | 2 |
| 可忽略 (Negligible) | 無傷害 | 1 |

| 發生機率 | 描述 | 分數 |
|----------|------|------|
| 頻繁 (Frequent) | >10⁻³ | 5 |
| 可能 (Probable) | 10⁻³ - 10⁻⁴ | 4 |
| 偶然 (Occasional) | 10⁻⁴ - 10⁻⁵ | 3 |
| 罕見 (Remote) | 10⁻⁵ - 10⁻⁶ | 2 |
| 極罕見 (Improbable) | <10⁻⁶ | 1 |

**風險分數計算**: 風險分數 = 嚴重程度 × 發生機率

**風險可接受性標準**:
- **不可接受 (紅色)**: 風險分數 ≥ 15
- **需要 ALARP 分析 (黃色)**: 風險分數 6-14
- **可接受 (綠色)**: 風險分數 ≤ 5

---

## 3. 危害識別與風險分析

### 3.1 臨床決策支援相關風險

#### 風險 ID: CDR-001
- **危害**: 錯誤的風險評分計算
- **危害情境**: 軟體演算法錯誤或資料輸入錯誤導致錯誤的出血風險評估
- **後果**: 
  - 低估風險：患者可能接受不適當的抗凝治療，增加出血風險
  - 高估風險：患者可能錯失適當的抗凝治療，增加血栓風險
- **嚴重程度**: 中等 (3) - 可能導致治療延誤或不當治療
- **發生機率**: 偶然 (3) - 軟體測試可減少但無法完全消除
- **風險分數**: 9 (黃色 - 需要 ALARP)
- **風險控制措施**:
  1. 廣泛的軟體測試 (單元測試、整合測試、臨床驗證)
  2. 演算法驗證與文獻對照
  3. 輸入資料驗證機制
  4. 使用者確認機制
  5. 定期軟體更新和校正

#### 風險 ID: CDR-002
- **危害**: 不完整的患者資料導致不準確評估
- **危害情境**: FHIR 資料缺失或不完整，影響風險計算
- **後果**: 基於不完整資訊做出的臨床決策可能不適當
- **嚴重程度**: 中等 (3)
- **發生機率**: 可能 (4) - EHR 資料完整性問題常見
- **風險分數**: 12 (黃色 - 需要 ALARP)
- **風險控制措施**:
  1. 資料完整性檢查機制
  2. 缺失資料的明確標示
  3. 不完整資料時的警告訊息
  4. 替代資料源建議
  5. 使用者手動輸入選項

#### 風險 ID: CDR-003
- **危害**: 過度依賴軟體建議
- **危害情境**: 醫療專業人員過度依賴軟體輸出，忽略臨床判斷
- **後果**: 忽略軟體未考慮的患者特殊情況
- **嚴重程度**: 中等 (3)
- **發生機率**: 偶然 (3)
- **風險分數**: 9 (黃色 - 需要 ALARP)
- **風險控制措施**:
  1. 明確的免責聲明和使用指引
  2. 強調軟體僅為決策支援工具
  3. 使用者培訓和教育
  4. 臨床判斷優先的提醒
  5. 定期使用情況審查

### 3.2 軟體故障相關風險

#### 風險 ID: SF-001
- **危害**: 軟體當機或無法存取
- **危害情境**: 系統故障、網路問題或伺服器停機
- **後果**: 無法使用決策支援工具，可能延誤臨床決策
- **嚴重程度**: 輕微 (2) - 有替代方案可用
- **發生機率**: 偶然 (3)
- **風險分數**: 6 (黃色 - 需要 ALARP)
- **風險控制措施**:
  1. 高可用性架構設計
  2. 冗餘系統和備份
  3. 快速故障恢復機制
  4. 狀態監控和告警
  5. 離線計算指引提供

#### 風險 ID: SF-002
- **危害**: 效能緩慢或超時
- **危害情境**: 系統負載過高或網路延遲導致回應緩慢
- **後果**: 影響臨床工作流程效率
- **嚴重程度**: 輕微 (2)
- **發生機率**: 偶然 (3)
- **風險分數**: 6 (黃色 - 需要 ALARP)
- **風險控制措施**:
  1. 效能優化和快取機制
  2. 負載平衡和自動擴展
  3. 超時處理和重試機制
  4. 效能監控和告警
  5. 漸進式載入設計

### 3.3 資料安全和隱私風險

#### 風險 ID: DS-001
- **危害**: 患者資料洩露
- **危害情境**: 未授權存取、資料傳輸被攔截或儲存不安全
- **後果**: 違反 HIPAA、患者隱私受損、法律責任
- **嚴重程度**: 重大 (4) - 嚴重的法律和聲譽後果
- **發生機率**: 罕見 (2) - 有強大的安全措施
- **風險分數**: 8 (黃色 - 需要 ALARP)
- **風險控制措施**:
  1. 端到端加密 (HTTPS/TLS)
  2. OAuth 2.0 認證和授權
  3. 最小權限原則
  4. 存取日誌和稽核追蹤
  5. 定期安全評估和滲透測試

#### 風險 ID: DS-002
- **危害**: 未授權的資料修改
- **危害情境**: 惡意攻擊者修改患者資料或計算結果
- **後果**: 基於錯誤資料的臨床決策
- **嚴重程度**: 中等 (3)
- **發生機率**: 罕見 (2)
- **風險分數**: 6 (黃色 - 需要 ALARP)
- **風險控制措施**:
  1. 資料完整性檢查
  2. 輸入驗證和清理
  3. 防止 SQL 注入和 XSS 攻擊
  4. 安全程式碼審查
  5. 定期安全更新

### 3.4 整合和互操作性風險

#### 風險 ID: INT-001
- **危害**: EHR 系統整合失敗
- **危害情境**: SMART on FHIR 整合問題導致無法存取患者資料
- **後果**: 軟體無法正常運作，影響臨床工作流程
- **嚴重程度**: 輕微 (2)
- **發生機率**: 偶然 (3)
- **風險分數**: 6 (黃色 - 需要 ALARP)
- **風險控制措施**:
  1. 廣泛的 EHR 系統相容性測試
  2. 標準化的 FHIR 實施
  3. 錯誤處理和恢復機制
  4. 替代資料輸入方式
  5. 技術支援和故障排除指引

#### 風險 ID: INT-002
- **危害**: FHIR 資料格式不相容
- **危害情境**: 不同 EHR 系統的 FHIR 實施差異
- **後果**: 資料解析錯誤或遺失
- **嚴重程度**: 中等 (3)
- **發生機率**: 偶然 (3)
- **風險分數**: 9 (黃色 - 需要 ALARP)
- **風險控制措施**:
  1. 多種 FHIR 實施的測試
  2. 彈性的資料解析機制
  3. 資料驗證和錯誤報告
  4. EHR 供應商協作
  5. 標準符合性認證

### 3.5 使用者介面和可用性風險

#### 風險 ID: UI-001
- **危害**: 使用者介面混淆或誤解
- **危害情境**: 不清楚的介面設計導致使用者錯誤操作
- **後果**: 錯誤的資料輸入或結果解釋
- **嚴重程度**: 中等 (3)
- **發生機率**: 偶然 (3)
- **風險分數**: 9 (黃色 - 需要 ALARP)
- **風險控制措施**:
  1. 使用者體驗設計和測試
  2. 清楚的標籤和說明
  3. 視覺化的風險等級顯示
  4. 確認對話框和警告
  5. 使用者培訓和說明文件

#### 風險 ID: UI-002
- **危害**: 行動裝置相容性問題
- **危害情境**: 在小螢幕或觸控裝置上顯示不當
- **後果**: 增加使用錯誤的可能性
- **嚴重程度**: 輕微 (2)
- **發生機率**: 偶然 (3)
- **風險分數**: 6 (黃色 - 需要 ALARP)
- **風險控制措施**:
  1. 響應式網頁設計
  2. 多裝置相容性測試
  3. 觸控友善的介面元素
  4. 適當的字體大小和間距
  5. 橫向和直向模式支援

---

## 4. 風險控制措施有效性驗證

### 4.1 軟體測試策略
- **單元測試**: 覆蓋率 ≥ 90%
- **整合測試**: 所有 FHIR 資源存取路徑
- **系統測試**: 完整的臨床工作流程
- **安全測試**: 滲透測試和漏洞評估
- **可用性測試**: 真實使用者環境測試

### 4.2 臨床驗證
- **回顧性研究**: 與已知案例比較
- **前瞻性研究**: 實際臨床環境驗證
- **專家評估**: 臨床專家審查
- **文獻對照**: 與發表的研究比較

### 4.3 監控和維護
- **效能監控**: 24/7 系統監控
- **錯誤追蹤**: 自動錯誤報告和分析
- **使用者回饋**: 定期收集和分析
- **定期審查**: 季度風險評估更新

---

## 5. 殘餘風險評估

所有識別的風險在實施控制措施後的殘餘風險評估：

| 風險 ID | 初始風險分數 | 控制措施後分數 | 可接受性 |
|---------|-------------|---------------|----------|
| CDR-001 | 9 | 4 | ✅ 可接受 |
| CDR-002 | 12 | 6 | 🟡 需監控 |
| CDR-003 | 9 | 4 | ✅ 可接受 |
| SF-001 | 6 | 3 | ✅ 可接受 |
| SF-002 | 6 | 3 | ✅ 可接受 |
| DS-001 | 8 | 4 | ✅ 可接受 |
| DS-002 | 6 | 3 | ✅ 可接受 |
| INT-001 | 6 | 4 | ✅ 可接受 |
| INT-002 | 9 | 4 | ✅ 可接受 |
| UI-001 | 9 | 4 | ✅ 可接受 |
| UI-002 | 6 | 3 | ✅ 可接受 |

### 5.1 總體風險可接受性
所有殘餘風險均在可接受範圍內，符合 ALARP 原則。

---

## 6. 風險管理文件控制

### 6.1 文件修訂歷史
| 版本 | 日期 | 修訂者 | 修訂說明 |
|------|------|--------|----------|
| 1.0 | 2024-01 | 風險管理團隊 | 初始版本 |

### 6.2 核准
- **風險管理負責人**: _________________ 日期: _______
- **品質保證經理**: _________________ 日期: _______
- **臨床事務主管**: _________________ 日期: _______

### 6.3 下次審查日期
本文件將於 **2024年7月** 進行下次定期審查，或在發生重大變更時進行非定期審查。

---

## 附錄

### 附錄 A: 風險評估工作表
### 附錄 B: 測試計畫參考
### 附錄 C: 法規要求對照表
### 附錄 D: 緊急應變程序 